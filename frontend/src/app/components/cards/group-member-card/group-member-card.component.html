<div
  class="group-member-card-container"
  [class]="{
    removing: isRemoving,
    promoting: isPromoting,
    demoting: isDemoting
  }"
>
  <user-avatar *ngIf="groupUser" [user]="groupUser.user ?? null"></user-avatar>
  <div class="title ml-2 flex flex-col justify-center items-start flex-grow">
    <h2 class="name">{{ groupUser.user?.firstname ?? '' }} {{ groupUser.user?.lastname ?? '' }}</h2>
    <div *ngIf="showRole" class="role flex justify-start items-center">
      <p class="role">
        {{ groupUser.groupRole }}
      </p>
      <span *ngIf="isPromoting">&nbsp;&rarr;&nbsp;Admin</span>
      <span *ngIf="isDemoting">&nbsp;&rarr;&nbsp;Member</span>
    </div>
  </div>
  <i
    *ngIf="
      hasActions &&
      groupUser.userId !== loggedInGroupUser?.userId &&
      groupUser.groupRole !== groupUserRoles.Owner
    "
    #toggleButton
    class="fas fa-ellipsis-v"
    (click)="openActions()"
  ></i>

  <div *ngIf="showingActions" #actions class="actions">
    <div
      *ngIf="
        (groupUser.groupRole === groupUserRoles.Member ||
          loggedInGroupUser?.groupRole === groupUserRoles.Owner) &&
        groupUser.userId !== loggedInGroupUser?.userId
      "
      class="remove-member action"
      (click)="actionRemoveClick()"
    >
      <i class="fas fa-user-slash"></i>
      <p>Remove member</p>
    </div>
    <div
      *ngIf="groupUser.groupRole === groupUserRoles.Member"
      class="promote-member action"
      (click)="actionPromoteClick()"
    >
      <i class="fas fa-caret-up"></i>
      <p>Promote to admin</p>
    </div>
    <div
      *ngIf="groupUser.groupRole === groupUserRoles.Admin"
      class="demote-member action"
      (click)="actionDemoteClick()"
    >
      <i class="fas fa-caret-down"></i>
      <p>Demote to member</p>
    </div>
  </div>
</div>
